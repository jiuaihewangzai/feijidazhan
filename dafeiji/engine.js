"use strict";var engine={ele:null,allBullets:[],allEnemys:[],totalScore:0,init:function(){return this.ele=document.getElementById("main"),this},start:function(){console.log("开始游戏"),this.loadding(function(){console.log("正式开始游戏！"),myPlane.init().move(),myPlane.fire(),engine.listenKeybord(),engine.createEnemy(),engine.crash()})},loadding:function(e){var n=document.createElement("div");n.className="logo",this.ele.appendChild(n);var l=document.createElement("div");l.className="load",this.ele.appendChild(l);var t=["images/loading1.png","images/loading2.png","images/loading3.png"],i=0,a=setInterval(function(){i>=2?(clearInterval(a),engine.ele.removeChild(n),engine.ele.removeChild(l),e&&e()):l.style.background="url("+t[++i%3]+") no-repeat"},500)},listenKeybord:function(){var e=0,n=0;onkeydown=function(l){37==(l=l||event).keyCode?e=-10:38==l.keyCode?n=-10:39==l.keyCode?e=10:40==l.keyCode&&(n=10)},onkeyup=function(l){37==(l=l||event).keyCode||39==l.keyCode?e=0:38!=l.keyCode&&40!=l.keyCode||(n=0)},setInterval(function(){var l=myPlane.ele.offsetLeft+e;l<0?l=0:l>engine.ele.offsetWidth-myPlane.ele.offsetWidth&&(l=engine.ele.offsetWidth-myPlane.ele.offsetWidth),myPlane.ele.style.left=l+"px",myPlane.ele.style.top=myPlane.ele.offsetTop+n+"px"},30)},createEnemy:function(){setInterval(function(){if(Math.random()>.8){new Enemy(1).init().move()}},6e3),setInterval(function(){if(Math.random()>.7){new Enemy(2).init().move()}},1e3),setInterval(function(){if(Math.random()>.7){new Enemy(3).init().move()}},1e3)},crash:function(){var e=setInterval(function(){for(var n=0;n<engine.allEnemys.length;n++){for(var l=0;l<engine.allBullets.length;l++)isCrash(engine.allEnemys[n].ele,engine.allBullets[l].ele)&&(engine.allBullets[l].boom(),engine.allBullets.splice(l,1),engine.allEnemys[n].hurt());if(isCrash(engine.allEnemys[n].ele,myPlane.ele)){clearInterval(e),console.log("Game Over!");break}}},30)}};